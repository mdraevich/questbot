from string import Template


class BotTemplates():
    """
    class for managing all answer templates for bot
    """

    DEFAULT_LANG_CODE = "ru"
    ANSWER_TEMPLATES = {
        "hello": {
            "ru": Template("üëã –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é, <b>$name</b>!\n"
                           "–Ø –±–æ—Ç –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥–Ω—ã—Ö –∫–≤–µ—Å—Ç–æ–≤.\n\n"
                           "‚ÑπÔ∏è –í—ã–ø–æ–ª–Ω–∏—Ç–µ /help –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏ –ø–æ —É—á–∞—Å—Ç–∏—é –≤ –∫–≤–µ—Å—Ç–∞—Ö.")
        },
        "help": {
            "ru": Template("")
        },
        "change_nickname_success": {
            "ru": Template("‚úÖ –ù–∏–∫–Ω–µ–π–º –∏–∑–º–µ–Ω–µ–Ω!")
        },
        "change_nickname_fail": {
            "ru": Template("‚ùå –ù–∏–∫–Ω–µ–π–º –Ω–µ –±—ã–ª –∏–∑–º–µ–Ω–µ–Ω!\n\n"
                           "‚ÑπÔ∏è –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —É—Å–ª–æ–≤–∏—è–º:\n"
                           "1. –∏–º–µ–µ—Ç –¥–ª–∏–Ω—É <b>–æ—Ç 4 –¥–æ 25 —Å–∏–º–≤–æ–ª–æ–≤</b> (–≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ);\n"
                           "2. –Ω–∏–∫–Ω–µ–π–º —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ <b>–±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã</b> –∏ "
                           " <b>–Ω–∏–∂–Ω–∏–π –ø—Ä–æ–±–µ–ª</b>.")
        },
        "help": {
            "ru": Template("üõü <b>–°–ø—Ä–∞–≤–∫–∞</b>\n\n"
                           "<b>1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</b>\n"
                           "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –Ω–∏–∫–Ω–µ–π–º, –ø—Ä–∏—á–µ–º –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. "
                           "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–Ω–µ –∫–≤–µ—Å—Ç–∞ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã—Ö –∫–≤–µ—Å—Ç–∞—Ö, –≤ –∫–æ—Ç–æ—Ä—ã—Ö "
                           "–º–æ–∂–µ—Ç –ø—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ, –Ω–∞–∂–∞–≤ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∫–Ω–æ–ø–∫—É –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏ –æ –∫–≤–µ—Å—Ç–µ.\n"
                           "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–≤—à–∏—Å—å –Ω–∞ –∫–≤–µ—Å—Ç, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–∞–ª–µ–µ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ "
                           "—Å–æ–±—ã—Ç–∏—è—Ö –≤ —Ä–∞–º–∫–∞—Ö –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫–≤–µ—Å—Ç–∞ (–Ω–∞—á–∞–ª–æ, —Å—Ç–∞—Ä—Ç, –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∏ —Ç.–¥.).\n"
                           "–ü–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∫–≤–µ—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, –≥–¥–µ –ø–æ–ª—É—á–∞–µ—Ç "
                           "—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã—Ö –∫–≤–µ—Å—Ç–∞—Ö.\n"
                           "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç —É—á–∞—Å—Ç–∏—è –≤ –∫–≤–µ—Å—Ç–µ <b>–±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ "
                           "—É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤–Ω–æ–≤—å</b>.\n\n"
                           "<b>2. –ö–æ–º–∞–Ω–¥–∞</b>\n"\
                           "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–µ–ª—è—Ç—Å—è –º–µ–∂–¥—É –∫–æ–º–∞–Ω–¥–∞–º–∏ –ø–æ—Ä–æ–≤–Ω—É. –ö–æ–ª-–≤–æ –∫–æ–º–∞–Ω–¥ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è "
                           "–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –∫–≤–µ—Å—Ç–∞ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–º.\n"
                           "–ò–≥—Ä–æ–∫–∏ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã –∏–º–µ—é—Ç —Ä–∞–≤–Ω—ã–µ –ø–æ–ª–Ω–æ–º–æ—á–∏—è, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∫–∞–∂–¥—ã–π –≤ –ø—Ä–∞–≤–µ –¥–∞—Ç—å –æ—Ç–≤–µ—Ç –∏–ª–∏ "
                           "–∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∏–≥—Ä–æ–∫–æ–≤ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è "
                           "–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —á–∞—Ç–∞ (—É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–≤–µ—Å—Ç–∞).\n\n"
                           "<b>3. –ö–≤–µ—Å—Ç</b>\n"\
                           "–ö–≤–µ—Å—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ –∫–æ–ª-–≤–∞ –∫–æ–º–∞–Ω–¥, –¥–ª—è –∫–∞–∂–¥–æ–π –∏–∑ –∫–æ—Ç–æ—Ä–æ–π –µ—Å—Ç—å "
                           "–ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –∑–∞–¥–∞–Ω–∏–π.\n"
                           "–ó–∞–¥–∞–Ω–∏—è –∏–º–µ–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ –æ–¥–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞, –Ω—É–ª—è –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫ –∏ –æ–¥–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞. "
                           "–ó–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∏–ª–∏ –¥–∞—á—É –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω —à—Ç—Ä–∞—Ñ –∫–æ–º–∞–Ω–¥–µ. "
                           "–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏.\n\n"
                           "<b>4. –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞</b>\n"\
                           "‚ñ´Ô∏è/start ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n"
                           "‚ñ´Ô∏è/help ‚Äî –ø–æ–º–æ—â—å –ø–æ –±–æ—Ç—É\n"
                           "‚ñ´Ô∏è/nickname –ù–ò–ö–ù–ï–ô–ú ‚Äî —Å–º–µ–Ω–∞ –Ω–∏–∫–Ω–µ–π–º–∞\n"
                           "‚ñ´Ô∏è/register –ò–î–ï–ù–¢–ò–§–ò–ö–ê–¢–û–† ‚Äî –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –∫–≤–µ—Å—Ç\n"
                           "‚ñ´Ô∏è/unregister ‚Äî –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç —É—á–∞—Å—Ç–∏—è –≤ –∫–≤–µ—Å—Ç–µ\n"
                           "‚ñ´Ô∏è/aboutquest ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º –∫–≤–µ—Å—Ç–µ\n"
                           "‚ñ´Ô∏è/aboutteam ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–∞–Ω–¥–µ\n"
                           "‚ñ´Ô∏è/aboutme ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–±–µ\n"
                           "‚ñ´Ô∏è/answer –û–¢–í–ï–¢ ‚Äî –¥–∞—Ç—å –æ—Ç–≤–µ—Ç –≤ —Ç–µ–∫—É—â–µ–º –∫–≤–µ—Å—Ç–µ\n"
                           "‚ñ´Ô∏è/hint ‚Äî –∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É –≤ —Ç–µ–∫—É—â–µ–º –∫–≤–µ—Å—Ç–µ\n")
        },
        "quest_scheduled": {
            "ru": Template("üí¨ <b>–î–æ—Å—Ç—É–ø–µ–Ω –Ω–æ–≤—ã–π –∫–≤–µ—Å—Ç!</b>\n\n"
                           "<b>–ù–∞—á–∞–ª–æ</b>: $date\n"
                           "<b>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</b>: $duration\n\n"
                           "<b>$quest_name</b>\n"
                           "<i>$quest_description</i>\n\n"
                           "<b>–£—á–∞—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:</b>\n"
                           "$teams\n\n"
                           "‚ö†Ô∏è <b>–î–ª—è —É—á–∞—Å—Ç–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É:</b>\n"
                           "<code>/register $qevent_id</code>"
                           ""
                           "")
        },
        "register_qevent_success": {
            "ru": Template("‚úÖ –¢—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª—Å—è –Ω–∞ –∫–≤–µ—Å—Ç #$qevent_id!")
        },
        "register_qevent_fail": {
            "ru": Template("‚ùå –û—à–∏–±–∫–∞!\n–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.")
        },
        "unregister_success": {
            "ru": Template("üèÉ‚Äç‚ôÇÔ∏è –¢—ã –ø–æ–∫–∏–Ω—É–ª –∫–≤–µ—Å—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω.")
        },
        "unregister_fail": {
            "ru": Template("‚ùå –¢—ã –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª—Å—è –Ω–∞ –∫–≤–µ—Å—Ç, —á—Ç–æ–±—ã –ø–æ–∫–∏–Ω—É—Ç—å –µ–≥–æ.")
        },
        "give_answer_fail": {
            "ru": Template("‚ùå –¢—ã –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—à—å –≤ –∫–≤–µ—Å—Ç–µ, —á—Ç–æ–±—ã –ø—Ä–∏—Å–ª–∞—Ç—å –æ—Ç–≤–µ—Ç.")
        },
        "give_answer_wrong_format": {
            "ru": Template("‚ùå –û—Ç–≤–µ—Ç –Ω–µ –ø—Ä–∏–Ω—è—Ç, —Ç–∞–∫ –∫–∞–∫ –Ω–µ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—è–º:\n"
                           "1. —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Ç 1 –¥–æ 25 —Å–∏–º–≤–æ–ª–æ–≤;\n"
                           "2. —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ –Ω–∏–∂–Ω–µ–µ "
                           "–ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ.")
        },
        "get_hint_fail": {
            "ru": Template("‚ùå –¢—ã –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—à—å –≤ –∫–≤–µ—Å—Ç–µ, —á—Ç–æ–±—ã –∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É.")
        },
        "quest_started_info": {
            "ru": Template("üì£ <b>–ö–≤–µ—Å—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è</b>!\n\n"
                           "<i>$team_description</i>\n"
                           "<a href='$team_communication'>–ö–æ–º–∞–Ω–¥–Ω—ã–π —á–∞—Ç</a>")
        },
        "quest_new_task": {
            "ru": Template("üì£ <b>–ü–æ–ª—É—á–µ–Ω–æ –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ</b>!\n\n"
                           "<i>$task_question</i>")
        },
        "quest_no_tasks_left": {
            "ru": Template("üì£ <b>–í—ã –≤—ã–ø–æ–ª–Ω–∏–ª–∏ –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è</b>!")
        },
        "quest_wrong_answer": {
            "ru": Template("‚ö†Ô∏è <b>$username</b> –ø—Ä–∏—Å–ª–∞–ª –Ω–µ–≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç ‚Äî <i>$answer</i>!")
        },
        "quest_correct_answer": {
            "ru": Template("‚úÖ <b>$username</b> –ø—Ä–∏—Å–ª–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç ‚Äî <i>$answer</i>!")
        },
        "get_hint_success": {
            "ru": Template("‚ÑπÔ∏è <b>$username</b> –∑–∞–ø—Ä–æ—Å–∏–ª –¥–ª—è –∫–æ–º–∞–Ω–¥—ã –ø–æ–¥—Å–∫–∞–∑–∫—É!\n\n"
                           "<i>$task_hint</i>")
        },
        "get_hint_empty": {
            "ru": Template("‚ÑπÔ∏è <b>$username</b> –∑–∞–ø—Ä–æ—Å–∏–ª –¥–ª—è –∫–æ–º–∞–Ω–¥—ã –ø–æ–¥—Å–∫–∞–∑–∫—É, "
                           "–Ω–æ –ø–æ–¥—Å–∫–∞–∑–∫–∏ —É–∂–µ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å.")
        },
    }

    def get_answer_template(self, template_name, prefer_lang_code):
        """
        returns answer template for specified name and preferred lang code
        """

        if template_name not in self.ANSWER_TEMPLATES:
            raise KeyError(f"Cannot find an answer template with "
                           f"template_name={template_name}")
        if prefer_lang_code not in self.ANSWER_TEMPLATES[template_name]:
            lang_code = self.DEFAULT_LANG_CODE
        else:
            lang_code = prefer_lang_code

        return self.ANSWER_TEMPLATES[template_name][lang_code]